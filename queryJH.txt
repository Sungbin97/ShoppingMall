// 상품 테이블 (최근 수정버젼이랑 같음)
create table tbl_product(
    pno int(30) primary key auto_increment, -- 상품 번호
    pName varchar(50) not null, -- 상품명
    pMainCategory varchar(50) not null, -- 메인 카테고리
    pSubCategory varchar(50) not null, -- 서브 카테고리
    pSize varchar(50), -- 상품 사이즈 (추후 별도 테이블로 분리 예정)
    pPrice int(50), -- 상품 가격 (추후 별도 테이블로 분리 예정)
    pAmount int(30), -- 상품 재고
    pColor varchar(50), -- 상품 색상
    pRegdate DATETIME default now(), -- 상품 등록일
    pImage varchar(50) not null, -- 상품 대표 이미지
    pInformation varchar(50) not null, -- 상품 세부정보 대표 이미지
    pRating decimal(2,1), -- 상품 평점
    pReviewCnt int(20), -- 상품 리뷰 개수
    pDiscount int(10) -- 상품 할인률(%)
);
// 리뷰
create table tbl_review(
	rno int(10) not null auto_increment primary key,
	pno int(10) not null,
    mno int(10),
    rRating int(10),
	rContent varchar(1000) not null,
    LIKEHIT int default 0,
    rImageURL varchar(150),
	rRegdate TIMESTAMP not null default now(),
	rUpdatedate TIMESTAMP not null default now()

);
-- 리뷰 추천 테이블
create table tbl_review_LIKE(
LIKENO int(10) NOT NULL PRIMARY KEY ,
pno int(10),
mno int(10) ,
rmno int(10) ,
RNO int(10)
);

// 상품 옵션 테이블 (옵션2 ,옵션2 이름 추가)
create table tbl_product_opt(
	pcno int(5) auto_increment primary key,
	pno int(5),
     pAmount int(100), -- 재고
    pOption varchar(30) default '없음', -- 옵션 기본값
	pOptionName varchar(30)  default '없음' , -- 옵션 기본값 이름
     pOption2 varchar(30) default '없음', -- 옵션 기본값
	pOptionName2 varchar(30)  default '없음' , -- 옵션 기본값 이름
      pColor varchar(30) default '없음' , -- 색상
      pOptionPrice int(11) default 0 -- 옵션 추가금액

);

-- 주문 테이블 (수정  없음)
create table tbl_order(
    mno int(30) not null, -- 회원번호
    ono varchar(50) primary key , -- 주문번호
    orderDate DATETIME default now(), -- 주문일자
    receiverName varchar(30) , -- 받는 사람 성명
    receiverPhone varchar(50) , -- 밥는 사람 연락처
    postcode varchar(50), -- 우편번호
    address varchar(50), -- 기본주소
    detailAddress varchar(50) not null, -- 상세주소
    message varchar(50) , -- 배송 메세지
    tProductPrice int(30) , -- 총 상품가격(순수 상품가격)
    tShipFee int(30) , -- 배송비
    tUsePoint int(50), -- 총 사용한 포인트
    tTotalPrice int(30) , -- 최총 총 결제금액(최종 결제금액 = 상품가+배송비-사용한포인트)
    tPayStatus varchar(50) default '결제완료', -- 결제상태
    tSavePoint int(50), -- 총 적립된 포인트
    foreign key (mno) references tbl_memberInfo (mno)
);

-- 주문 상품 테이블 (savepoint 컬럼 추가)
create table tbl_orderItem(
    ono varchar(50), -- 주문 번호
    oINo int(50) auto_increment primary key, -- 주문상품 번호
    pno int(50), -- 상품 번호
    iName varchar(50), -- 상품명
    iOption varchar(50), -- 상품 옵션1
    iOptionName varchar(50), -- 상품 옵션1 이름
    iOption2 varchar(50), -- 상품 옵션1
    iOptionName2 varchar(50), -- 상품 옵션1 이름
    iColor varchar(50), -- 상품 색상명
    iPrice int(50), -- 상품 가격(순수 상품가격)
    iDiscount int(30), -- 상품 할인률(%)
    iDisPrice int(50), -- 할인된 상품 가격 (상품 가격에 할인률 적용한 가격)
    iCount int(50), -- 상품 수량(주문한 상품 수량)

    savePoint int(50), -- 새로 추가(하나의 상품별 적립 포인트)!!!!!!!!!!!!!!!!!

    iTotalPrice int(50), -- 최종 결재금액
    iDeliveryStatus varchar(30) default '배송전', -- 배송 상태
    iExStatus varchar(30) default '미신청', -- 교환반품취소 신청 상태
    FOREIGN KEY (ono) REFERENCES tbl_order(ono),
    FOREIGN KEY (pno) REFERENCES tbl_product(pno)
);
-- 멤버 테이블 (수정사항 없음)
create table tbl_memberInfo(
    mno int(30) primary key auto_increment, -- 회원번호
    id varchar(50) not null, -- 아이디
    password varchar(50) not null, -- 비밀번호
    name varchar(50) not null, -- 이름
    nickName varchar(50) not null, -- 별명
    gender varchar(50) not null, -- 성별
    sSNum varchar(50) not null, -- 주민번호
    email varchar(50) not null, -- 이메일
    phoneNum varchar(50) not null, -- 전화번호
    mobileNum varchar(50) not null, -- 휴대폰 번호
    postcode varchar(50) not null, -- 우편번호
    address varchar(50) not null, -- 기본주소
    detailAddress varchar(50) not null, -- 세부주소
    interestSports varchar(50) default '없음', -- 관심 운동
    auth varchar(50) not null, -- 회원 권한
    grade varchar(50) not null, -- 회원 등급
    point int(100) default 0 -- 회원 보유 포인트
);
